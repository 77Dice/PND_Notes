# IPv6 Protocol

## ICMPv6 Neighbour Discovery Protocol(NDP)

how it is related to SLAAC????
>([Wiki](https://en.wikipedia.org/wiki/Neighbor_Discovery_Protocol)) Its a *Link Layer Protocol* and it defines many pakets types(13x) used for:

### IPv6 Address Resolution (IPv4 ARP):

given IPv6 address an host want to know the related `mac of its neighbours` and insert it in the Neighbour Cache using:
- (135)Neighbour Solicitation Message: Host asking for `Link Layer Address(MAC)` of another Host; 
	- `Multicast Request` to find out address of new hosts ([to solicited node](https://en.wikipedia.org/wiki/Solicited-node_multicast_address)):
		- host subscribe to *multicast Group* that correspond to its MAC
		- every time someone wants to reach him they just send to its Multicast Group a Neigh. Sollicitation
	- `Unicast Request` just to verify if host is reachable or not
- (136)Neighbour Advertisement Message: answer to Neighbour Sollicitation mss.

Respectively in IPv4 we have:
- ARP Request/Reply messages
- IPv4 uses `Ethernet Broadcast Message` instead of `IPv6 Multicast`
- more efficient => *no broadcast over ethernet* + Reduce packets

### Dynamic IPv6 Address Allocation:

In order to obtain `IPv6 Address information` an host need to send a Solicitation to the Router and then It will answer will all possible `available configuration` for that specific network `stateless or stateful`
- (133)Router Solicitation Message: Host wants to locate `Routers on an attached link` and ask for IPv6 configuration Options available
- (134)Router Advertisement Message: Routers `advertise their presence` periodically or as respond to a Router Solicitation message
	- available configuration for host can be:
		- OPT1: SLAAC - No DHCPv6(default on Cisco Routers):
			- router gives everything (prefix,Def gateway,DNS...) 
		- OPT2: SLAAC + Stateless DHCPv6 for DNS address:
			- router gives info but DNS addresses can be found only `from DHCPv6`
		- OPT1-2 are `stateless` configuration then DHCPv6 does `not maintain state` of addresses
		- OPT3: All hosts except default Gateway use DHCPv6:
			- `stateful`: just ask to an DHCPv6 server all info for IPv6 configuration

- (137)Redirect message: routers inform hosts of a better first hop router for a destination

- for IPv4 cases:
	- DHCP or static allocation 


## Stateless Address Autoconfiguration (SLAAC)

stateless as:
- No full knowledge of the network state
- No complete list of addresses used 
